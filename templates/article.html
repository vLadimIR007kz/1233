<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="..\..\static\article.css">
    <title>Article</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            var initialCourseId = $(".side-menu li:first-child a").attr("href");
            updateContent(initialCourseId);

            $(".side-menu a").click(function (event) {
                event.preventDefault();
                var courseId = $(this).attr("href");
                updateContent(courseId);
            });

            function updateContent(courseId) {
                $.ajax({
                    url: "/get_course_content/" + courseId,
                    type: "GET",
                    success: function (data) {
                        $("#course-title").text(data.title);

                        var descriptionHtml = "";
                        $.each(data.description, function (index, value) {
                            if (value.startsWith("<")) {

                                var imageId = value.substring(1, value.length - 1);
                                descriptionHtml += '<img src="/get_image/' + imageId + '" alt="Image">';
                            } else {

                                descriptionHtml += "<p>" + value + "</p>";
                            }
                        });
                        $("#course-description").html(descriptionHtml);
                    },
                    error: function () {
                        console.log("Еррор");
                    }
                });
            }
        });
    </script>
</head>
<body>
<nav>
    <div class="wrapper">
      <div class="logo"><a href="/"><img src="static\logo.png" alt=""></a></div>
      <input type="radio" name="slider" id="menu-btn">
      <input type="radio" name="slider" id="close-btn">
      <ul class="nav-links">
        <label for="close-btn" class="btn close-btn"><i class="fas fa-times"></i></label>
        <li><a href="/meets-subj1">Консультации</a></li>
        <li>
          <a href="/subjects" class="desktop-item">Предметы</a>
        </li>
        <li><a href="/faq">FAQ</a></li>
        <li><a href="/new">Подписка</a></li>
        <li><a href="/Teachers">Учителя</a></li>
        <li><a href="/notifications">Уведомления</a></li>
      </ul>
      <ul class="nav-links">
          {% if not(current_user.is_authenticated) %}
      <li><div class="Log"><a href="/index">Вход</a></div></li>
      <li><div class="Sign"><a href="/register">Регистрация</a></div></li>
          {% endif %}
          {% if current_user.is_authenticated %}
            <li><div><a href="/logout">Выход</a></div></li>
          {% endif %}
      </ul>

      <label for="menu-btn" class="btn menu-btn"><i class="fas fa-bars"></i></label>
    </div>
  </nav>


  <div class="sec-center">
    <input class="dropdown" type="checkbox" id="dropdown" name="dropdown"/>
    <label class="for-dropdown" for="dropdown">Меню<i class="uil uil-arrow-down"></i></label>
    <div class="section-dropdown">
      <a href="main">Главная <i class="uil uil-arrow-right"></i></a>
      <a href="meets-subj1">Консультации <i class="uil uil-arrow-right"></i></a>
      <a href="new">Подписка <i class="uil uil-arrow-right"></i></a>
      <input class="dropdown-sub2" type="checkbox" id="dropdown-sub2" name="dropdown-sub2"/>
      <a href="subjects">Предметы<i class="uil uil-arrow-right"></i></a>
      <a href="Teachers">Учителя <i class="uil uil-arrow-right"></i></a>
      <a href="faq">FAQ</a>
      <a href="index">Вход</a>
      <a href="index">Регистрация</a>
    </div>
  </div>

        {% set n=1 %}
      <br>
      
      <br>
      <div class="whole">
        <div class="sidebar">
            <div class="side-text">
                <h2>Предмет</h2>
                <h3>Класс</h3>
            </div>
            <ul class="side-menu">
                {% for course in courses %}
                    <li><a href="{{ course.id }}">{{ course.title }}</a></li>
                {% endfor %}
            </ul>
        </div>

        <div class="container">
            <div class="header">
                <div class="header-text">
                    <h2 id="course-title"></h2>
                </div>
            </div>
            <div class="main-text">
                <div id="course-description"></div>
            </div>
        </div>
    </div>
</body>
</html>